<!doctype html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<!-- Head Start -->
<th:block th:replace="~{xdm/v1/infra/include/head :: head}"></th:block>
<!-- Head End -->

<body>

	<!-- Loading wrapper start -->
	<!-- <div id="loading-wrapper">
			<div class="spinner">
                <div class="line1"></div>
				<div class="line2"></div>
				<div class="line3"></div>
				<div class="line4"></div>
				<div class="line5"></div>
				<div class="line6"></div>
            </div>
		</div> -->
	<!-- Loading wrapper end -->

	<!-- Page wrapper start -->
	<div class="page-wrapper">

		<!-- Sidebar wrapper start -->
		<th:block th:replace="~{xdm/v1/infra/include/nav :: nav}"></th:block>
		<!-- Sidebar wrapper end -->

		<!-- *************
				************ Main container start *************
			************* -->
		<div class="main-container">

			<!-- Page header starts -->
			<div class="page-header">

				<div class="toggle-sidebar" id="toggle-sidebar">
					<i class="bi bi-list"></i>
				</div>



				<!-- Header actions container start -->
				<th:block th:replace="~{xdm/v1/infra/include/header :: header}"></th:block>
				<!-- Header actions container end -->

			</div>
			<!-- Page header ends -->
			<!-- Breadcrumb start -->
			<ol class="breadcrumb">
				<li class="breadcrumb-item"><i class="bi bi-house"></i> <a
					href="index.html">Page 1</a></li>
				<li class="breadcrumb-item">Page 2</li>
				<li class="breadcrumb-item breadcrumb-active" aria-current="page">Default</li>
			</ol>
			<!-- Breadcrumb end -->
			<h3>고객계약관리</h3>
			<!-- Content wrapper scroll start -->
			<div class="content-wrapper-scroll">

				<!-- Content wrapper start -->
				<div class="content-wrapper">

					<!-- Row start -->
					<div class="row mb-3">
						<div class="col-sm-12 col-12">

							<!-- Card start -->
							<div class="card">
								<div class="card-header">
									<div class="card-title">기본정보</div>
								</div>
								<form class="needs-validation" novalidate id="form" name="form"
									method="post" action="/xdm/v1/infra/customercontract/customercontractXdmPdt">
									<div class="card-body">
										<div class="container-fluid">
											<div class="row mb-3">
												<div class="col-md-3">
													<div class="card">
														<div class="card-body">
															<label for="validationCustom02" class="form-label">seq<span
																style="color: red;">*</span></label> <input type="text"
																class="form-control" id="cmcSeq" name="cmcSeq" th:value="${item?.cmcSeq}" readonly>
														</div>
													</div>
												</div>
												<div class="col-md-3">
													<div class="card">
														<div class="card-body">
															<label for="customer_cmSeq" class="form-label">고객이름</label>
															<select class="form-select" id="customer_cmSeq" name="customer_cmSeq">
																<option value="">선택</option>
																<option th:each="List : ${listCustomer}"
																	th:value="${List.customer_cmSeq}" th:text="${List.cmName}"
																	th:selected="${List.customer_cmSeq == item?.customer_cmSeq}">사용</option>
															</select>
														</div>
													</div>
												</div>
												<div class="col-md-3">
													<div class="card">
														<div class="card-body">
															<label for="customer_cmSeq" class="form-label">상품이름</label>
															<select class="form-select" id="insProduct_inspSeq" name="insProduct_inspSeq">
																<option value="">선택</option>
																<option th:each="List : ${listInsProduct}"
																	th:value="${List.insProduct_inspSeq}" th:text="${List.inspName}"
																	th:selected="${List.insProduct_inspSeq == item?.insProduct_inspSeq}">사용</option>
															</select>
														</div>
													</div>
												</div>
												<div class="col-md-3">
													<div class="card">
														<div class="card-body">
															<label for="cmcStatus" class="form-label fs--1">진행상태<span class="text-danger fs-0">*</span></label>
															<select id="cmcStatus" name="cmcStatus" class="form-select">
																<option value="" readonly>선택하세요</option>
																<option th:each="list : ${@codeService.selectListCachedCode(2)}" th:value="${list.cdSeq}" th:text="${list.cdName}" th:selected="${list.cdSeq} == ${item?.cmcStatus}"></option>
															</select>	
														</div>						
													</div>
												</div>
												<div class="col-md-3">
													<div class="card">
														<div class="card-body">
															<label for="validationCustom02" class="form-label">등록일</label>
															<input type="text" class="form-control" name="cmcDateTimeReg" id="cmcDateTimeReg"
																th:value="${#dates.format(item?.cmcDateTimeReg, 'yyyy/MM/dd HH:mm:ss')}" disabled>
														</div>
													</div>
												</div>
												<div class="col-md-3">
													<div class="card">
														<div class="card-body">
															<label for="validationCustom02" class="form-label">수정일</label>
															<input type="text" class="form-control" name="cmcDateTimeEdit"
																th:value="${#dates.format(item?.cmcDateTimeEdit, 'yyyy/MM/dd HH:mm:ss')}" readonly>
														</div>
													</div>
												</div>
												<div class="col-md-3">
													<div class="card">
														<div class="card-body">
															<label for="validationCustom02" class="form-label">종료일</label>
															<input type="text" class="form-control" name="cmcDateTimeEnd"
																th:value="${#dates.format(item?.cmcDateTimeEnd, 'yyyy/MM/dd HH:mm:ss')}" readonly>
														</div>
													</div>
												</div>
												<div class="col-md-3">
													<div class="card">
														<div class="card-body">
															<label for="validationCustom04" class="form-label">삭제여부<span
																style="color: red;">*</span></label> <select class="form-select" id="cmcDelNy" name="cmcDelNy">
																<option selected disabled value="">삭제여부</option>
																<option value="0" th:selected="${item?.cmcDelNy == 0}">미삭제</option>
																<option value="1" th:selected="${item?.cmcDelNy == 1}">삭제</option>
															</select>
														</div>
													</div>
												</div>
												<div class="row">
													<div class="col-md-3" style="padding-right: 0px;">
														<button type="button" id='btnList' class="btn btn-white">
															<svg xmlns="http://www.w3.org/2000/svg" width="16"
																height="16" fill="black"
																style="background-color: white;" class="bi bi-list-ul"
																viewBox="0 0 16 16">
																<path fill-rule="evenodd"
																	d="M5 11.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5m0-4a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5m0-4a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5m-3 1a1 1 0 1 0 0-2 1 1 0 0 0 0 2m0 4a1 1 0 1 0 0-2 1 1 0 0 0 0 2m0 4a1 1 0 1 0 0-2 1 1 0 0 0 0 2" />
																</svg>
														</button>
														<button type="button" id='btnDelete' class="btn btn-white"
															style="background-color: red;">
															<svg xmlns="http://www.w3.org/2000/svg" width="10"
																height="10" fill="white" class="bi bi-x-lg"
																viewBox="0 0 16 16">
		                                                            <path
																	d="M2.146 2.854a.5.5 0 1 1 .708-.708L8 7.293l5.146-5.147a.5.5 0 0 1 .708.708L8.707 8l5.147 5.146a.5.5 0 0 1-.708.708L8 8.707l-5.146 5.147a.5.5 0 0 1-.708-.708L7.293 8z" />
		                                                        </svg>
														</button>
														<button type="button" id='btnUelete' class="btn btn-white"
															style="background-color: red;">
															<svg xmlns="http://www.w3.org/2000/svg" width="10"
																height="10" fill="white" class="bi bi-trash"
																viewBox="0 0 16 16">
		                                                            <path
																	d="M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5m2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5m3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0z" />
		                                                            <path
																	d="M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4zM2.5 3h11V2h-11z" />
		                                                        </svg>
														</button>
													</div>
													<div class="col-md-8"></div>
														<div class="col-md-1" style="margin-right: 0; margin-left: 0;">
															<button type="button" id='btnPdt' class="btn btn-white" style="float: right;">
																<svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="white" style="background-color: blue;"
																	class="bi bi-plus-square" viewBox="0 0 16 16">
																	<path d="M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2z" />
																	<path d="M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4" />
																</svg>
															</button>
														</div>
													</div>
												</div>
											</div>
										</div>
									</form>
								<!-- Row end -->
							</div>
						</div>
						<!-- Card end -->
					</div>
				</div>
				<!-- Row end -->
			</div>
			<!-- Content wrapper end -->

			<!-- modal start -->
			<!-- <div class="modals-placeholder"> 
			<div class="modal fade" id="modalSm" tabindex="-1" aria-labelledby="modalSmLabel" aria-hidden="true">
				<div class="modal-dialog modal-sm">
					<div class="modal-content">
						<div class="modal-header">
							<h5 class="modal-title" id="modalSmLabel">Modal title</h5>
								<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
						</div>
						<div class="modal-body">...</div>
							<div class="modal-footer">
								<button type="button" class="btn btn-dark" data-bs-dismiss="modal">Close</button>
								<button type="button" id="btnUelete" class="btn btn-success" data-bs-dismiss="modal">Save changes</button>
							</div>
						</div>
					</div>
				</div>
			</div> -->
			<!-- modal end -->

			<!-- App Footer start -->
			<div class="app-footer">
				<span>© Bootstrap Gallery 2023</span>
			</div>
			<!-- App footer end -->

		</div>
		<!-- Content wrapper scroll end -->

	</div>
	<!-- *************
				************ Main container end *************
			************* -->

	</div>
	<!-- Page wrapper end -->

	<!-- *************
			************ Required JavaScript Files *************
		************* -->
	<!-- Required jQuery first, then Bootstrap Bundle JS -->
	<script src="/xdm/v1/template/vivo/assets/js/jquery.min.js"></script>
	<script src="/xdm/v1/template/vivo/assets/js/bootstrap.bundle.min.js"></script>
	<script src="/xdm/v1/template/vivo/assets/js/modernizr.js"></script>
	<script src="/xdm/v1/template/vivo/assets/js/moment.js"></script>

	<!-- *************
			************ Vendor Js Files *************
		************* -->

	<!-- Overlay Scroll JS -->
	<script
		src="/xdm/v1/template/vivo/vendor/overlay-scroll/jquery.overlayScrollbars.min.js"></script>
	<script
		src="/xdm/v1/template/vivo/vendor/overlay-scroll/custom-scrollbar.js"></script>

	<!-- Main Js Required -->
	<script src="/xdm/v1/template/vivo/assets/js/main.js"></script>

	<script>
		document.getElementById("btnList").onclick = function (){
			window.location = "/xdm/v1/infra/customercontract/customercontractXdmList";
		}
		
		document.getElementById("btnDelete").onclick = function() {
			let form = document.querySelector("form[name='form']");
			form.action = "/xdm/v1/infra/customercontract/customercontractXdmDele";
			form.submit();
		};
		
		document.getElementById("btnUelete").onclick = function() {
			let form = document.querySelector("form[name='form']");
			form.action = "/xdm/v1/infra/customercontract/customercontractXdmUele";
			form.submit();
		}
		
		document.getElementById("btnPdt").onclick = function(){
			let form = document.querySelector("form[name=form]");
			form.action = "/xdm/v1/infra/customercontract/customercontractXdmPdt";
			form.submit();
		}
	</script>
<!-- kakao 우편번호 Start -->
<script src="//t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script>
	<script type="text/javascript">
	    function sample6_execDaumPostcode() {
	        new daum.Postcode({
	            oncomplete: function(data) {
	                var addr = '';
	                var extraAddr = '';
	
	                if (data.userSelectedType === 'R') {
	                    addr = data.roadAddress;
	                } else {
	                    addr = data.jibunAddress;
	                }
	
	                // 위도 경도 요청 추가
	                var REST_API_KEY = '4a9a79871cbda231acbe5307768f4f50'; // API 키
	                fetch(`https://dapi.kakao.com/v2/local/search/address.json?query=${encodeURIComponent(addr)}`, {
	                    method: 'GET',
	                    headers: {
	                        'Authorization': `KakaoAK ${REST_API_KEY}`
	                    }
	                })
	                .then(response => response.json())
	                .then(data => {
	                    if (data.documents.length > 0) {
	                        var latitude = data.documents[0].y; // 위도
	                        var longitude = data.documents[0].x; // 경도
	                        document.getElementById('latitude').value = latitude;
	                        document.getElementById('longitude').value = longitude;
	                        console.log(`위도: ${latitude}, 경도: ${longitude}`);
	                    } else {
	                        console.log('위도와 경도를 찾을 수 없습니다.');
	                    }
	                })
	                .catch(error => console.error('API 요청 에러:', error));
	
	                // 기존 코드 계속 실행
	                if (data.userSelectedType === 'R') {
	                    // ... (기존 코드)
	                    
		                //사용자가 선택한 주소 타입에 따라 해당 주소 값을 가져온다.
		                if (data.userSelectedType === 'R') { // 사용자가 도로명 주소를 선택했을 경우
		                    addr = data.roadAddress;
		                } else { // 사용자가 지번 주소를 선택했을 경우(J)
		                    addr = data.jibunAddress;
		                }
		             	// 사용자가 선택한 주소가 도로명 타입일때 참고항목을 조합한다.
		                if(data.userSelectedType === 'R'){
		                    // 법정동명이 있을 경우 추가한다. (법정리는 제외)
		                    // 법정동의 경우 마지막 문자가 "동/로/가"로 끝난다.
		                    if(data.bname !== '' && /[동|로|가]$/g.test(data.bname)){
		                        extraAddr += data.bname;
		                    }
		                    // 건물명이 있고, 공동주택일 경우 추가한다.
		                    if(data.buildingName !== '' && data.apartment === 'Y'){
		                        extraAddr += (extraAddr !== '' ? ', ' + data.buildingName : data.buildingName);
		                    }
		                    // 표시할 참고항목이 있을 경우, 괄호까지 추가한 최종 문자열을 만든다.
		                    if(extraAddr !== ''){
		                        extraAddr = ' (' + extraAddr + ')';
		                    }
		                    // 조합된 참고항목을 해당 필드에 넣는다.
		                    document.getElementById("sample6_address").value = extraAddr;
		                
		                } else {
		                    document.getElementById("sample6_address").value = '';
		                }
	                    
	                } else {
	                    document.getElementById("sample6_address").value = '';
	                }
	
	                document.getElementById('sample6_postcode').value = data.zonecode;
	                document.getElementById("sample6_address").value = addr;
	                document.getElementById("sample6_detailAddress").focus();
	            }
	        }).open();
	    }
	</script>
<!-- kakao 우편번호 End -->
<!-- logout Start -->
	<script>
			document.getElementById("btnLogout").onclick = function(){
				$.ajax({
					async: true 
					,cache: false
					,type: "post"
					,url: "/signoutXdmProc"
					,success: function(response) {
								location.href = "/xdm/v1/infra/index/signinXdmView";
					}
					,error : function(jqXHR, textStatus, errorThrown){
						alert("ajaxUpdate " + jqXHR.textStatus + " : " + jqXHR.errorThrown);
					}
				});
			}
	</script>
<!-- logout End -->
</body>

</html>